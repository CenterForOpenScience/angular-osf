# OSF Angular – Internationalization (i18n) Strategy

## Index

- [Overview](#overview)
- [Integration: `@ngx-translate/core`](#integration-ngx-translatecore)
- [Usage Guidelines](#usage-guidelines)
- [Format: `en.json`](#format-enjson)
- [Source of Truth: `en.json` Only](#source-of-truth-enjson-only)
- [Language Branch Workflow](#language-branch-workflow)
- [Summary](#summary)

---

## Overview

The OSF Angular project uses [`@ngx-translate/core`](https://github.com/ngx-translate/core) to manage internationalization (i18n) across the entire application. This allows for consistent, dynamic translation of all user-visible text, making it easier to support multiple languages.

All strings rendered to users—whether in HTML templates or dynamically via Angular components—must be sourced from the centralized i18n JSON files located in:

```
src/app/i18n/
```

**IMPORTANT**
The OSF application must maintain 100% translation coverage, as it is a requirement of grant funding that supports a globally distributed user base.

## Integration: `@ngx-translate/core`

To support multilingual content, the following module is included globally:

```ts
import { TranslatePipe } from '@ngx-translate/core';
```

The translation service (`TranslateService`) is injected where necessary and used to load and access translations at runtime.

## Usage Guidelines

### 1. HTML Templates

In templates, use the `translate` pipe:

```html
<h1>{{ 'home.title' | translate }}</h1>
```

### 2. Dynamic Component Strings

For component logic, use the `TranslateService`:

```ts
private readonly translateService = inject(TranslateService);
public title!: string;

ngOnInit(): void {
  this.title = this.translate.instant('home.title');
}
```

Avoid hardcoded strings in both the template and logic. All user-facing text must be represented by a translation key from the JSON files in `src/app/i18n`.

## Format: `en.json`

The primary English translation file is located at:

```
src/app/i18n/en.json
```

The structure should be **namespaced by feature or component** for maintainability:

```json
{
  "home": {
    "title": "Welcome to OSF",
    "subTitle": "Your research. Your control."
  },
  "login": {
    "email": "Email Address",
    "password": "Password"
  }
}
```

Avoid deeply nested keys, and always use consistent camel-casing and key naming for reuse and clarity.

**Note**

The `common section` in the en.json file stores frequently used phrases to prevent one-off duplicate translations.

## Source of Truth: `en.json` Only

All translation key additions and updates must be made **only** in the `src/app/i18n/en.json` file.

> Other language files (e.g., `fr.json`, `es.json`) must **not** be modified by non-OSF engineers. These translations will be handle internally by the OSF Angular team.

This ensures consistency across translations and prevents desynchronization between supported languages.

### Summary

| Language File        | Editable? | Notes                                              |
| -------------------- | --------- | -------------------------------------------------- |
| `en.json`            | Yes       | Canonical source of all keys and values            |
| `fr.json`, `es.json` | No        | Never manually modified during feature development |

Always validate that new translation keys appear in `en.json` only.

## Language Branch Workflow

All updates to the i18n translation files (e.g., `en.json`) must follow a strict workflow:

### Branch Naming

Create a branch prefixed with:

```
language/<ticket-id>
```

Example:

```
language/ENG-145-update-login-copy
```

### Commit Message Format

The commit header must include the `lang()` label:

```
lang(ENG-145): update login page strings
```

This ensures that all translation updates are tracked, reviewed, and associated with the appropriate task or ticket.

## Summary

| Requirement            | Description                                                    |
| ---------------------- | -------------------------------------------------------------- |
| Translation Library    | [`@ngx-translate/core`](https://github.com/ngx-translate/core) |
| Source of All Strings  | `src/app/i18n/*.json`                                          |
| Required in HTML       | Must use the `translate` pipe                                  |
| Required in Components | Must use `TranslateService`                                    |
| English File Format    | Namespaced keys in `en.json`                                   |
| Branch Naming          | `language/<ticket-id>`                                         |
| Commit Convention      | `lang(<ticket-id>): message`                                   |
