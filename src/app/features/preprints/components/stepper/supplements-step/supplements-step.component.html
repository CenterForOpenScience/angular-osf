<h2>Supplements (optional)</h2>

<section class="m-t-12">
  <p class="line-height-3">Connect an OSF project to share data, code, protocols, or other supplemental materials.</p>
</section>

<section class="m-t-24 w-full flex flex-column gap-2 md:flex-row">
  <p-button
    [ngClass]="{
      active: selectedSupplementOption() === SupplementOptions.ConnectExistingProject,
    }"
    class="supplement-option-button w-full"
    [styleClass]="selectedProjectId() ? 'w-full cursor-not-allowed' : 'w-full'"
    [label]="'Connect an existing OSF project' | titlecase"
    severity="secondary"
    [disabled]="selectedProjectId()"
    (click)="selectSupplementOption(SupplementOptions.ConnectExistingProject)"
  />
  <p-button
    [ngClass]="{
      active: selectedSupplementOption() === SupplementOptions.CreateNewProject,
    }"
    class="supplement-option-button w-full"
    [styleClass]="selectedProjectId() ? 'w-full cursor-not-allowed' : 'w-full'"
    [label]="'Create a new OSF project' | titlecase"
    severity="secondary"
    [disabled]="selectedProjectId()"
    (click)="selectSupplementOption(SupplementOptions.CreateNewProject)"
  />
</section>

@if (selectedSupplementOption() === SupplementOptions.ConnectExistingProject) {
  @if (!selectedProjectId()) {
    <p-card styleClass="m-t-48" class="card">
      <div>
        <p class="line-height-3">This will make your project public, if it is not already</p>
        <p class="line-height-3">The projects and components for which you have admin access are listed below.</p>

        <p-select
          id="project-select"
          [options]="availableProjects()"
          optionLabel="name"
          optionValue="id"
          [placeholder]="'Select Project'"
          class="w-12 md:w-6"
          [editable]="true"
          styleClass="m-t-24"
          appendTo="body"
          [loading]="areAvailableProjectsLoading()"
          (onChange)="selectProject($event)"
          [showClear]="false"
        />
      </div>
    </p-card>
  } @else {
    <section class="selected-project m-t-24">
      <p>{{ selectedProjectId() }}</p>

      <p-button class="danger-icon-btn" icon="fas fa-trash" severity="danger" text (click)="disconnectProject()" />
    </section>
  }
}

@if (selectedSupplementOption() === SupplementOptions.CreateNewProject) {
  <!--  <osf-add-project-form />-->
}

<section class="m-t-48 flex flex-row justify-content-end align-items-center gap-2">
  <p-button class="w-6 md:w-6rem" styleClass="w-full" label="Back" severity="info" (click)="backButtonClicked()" />
  <p-button
    class="w-6 md:w-9rem"
    styleClass="w-full"
    label="Next"
    [disabled]="!selectedProjectId()"
    (click)="nextButtonClicked()"
  />
</section>
