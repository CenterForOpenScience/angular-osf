<osf-sub-header
  [title]="'resources.title' | translate"
  [showButton]="addButtonVisible()"
  [isButtonDisabled]="isAddingResource()"
  [buttonLabel]="'resources.add' | translate"
  (buttonClick)="addResource()"
/>

@if (isResourcesLoading()) {
  <osf-loading-spinner></osf-loading-spinner>
} @else {
  <div class="flex flex-column bg-white flex-1 p-4 gap-4">
    <p>
      {{ 'resources.description' | translate }}
      <a class="font-bold" href="https://help.osf.io/article/452-open-practice-badges" target="_blank">
        {{ 'common.labels.learnMore' | translate }}
      </a>
    </p>

    <div class="flex flex-column gap-2">
      @for (resource of resources(); track resource.id) {
        <div class="resource-block gap-3 p-3 flex flex-column md:p-4 md:flex-row">
          <div class="flex w-full gap-3 md:w-auto">
            @let iconName = resource.type === 'analytic_code' ? 'code' : resource.type;
            @let icon = `custom-icon-${iconName} icon-resource-size`;
            @let resourceName = resource.type === 'analytic_code' ? 'analytic code' : resource.type;
            <osf-icon class="align-self-start" [iconClass]="icon"></osf-icon>

            <div class="flex flex-column gap-2">
              <h2>{{ resourceName }}</h2>
              <a class="font-bold" [href]="doiDomain + resource.pid" target="_blank" rel="noopener noreferrer">
                {{ doiDomain + resource.pid }}
              </a>
              <p class="mt-1">{{ resource.description }}</p>
            </div>
          </div>

          <div class="flex gap-3 ml-auto w-full md:w-auto">
            <p-button
              class="w-full md:w-auto"
              styleClass="w-full md:w-auto"
              severity="secondary"
              [label]="'common.buttons.edit' | translate"
              (onClick)="updateResource(resource)"
            ></p-button>

            <p-button
              class="w-full md:w-auto"
              styleClass="w-full md:w-auto"
              severity="danger"
              [label]="'common.buttons.delete' | translate"
              (onClick)="deleteResource(resource.id)"
            ></p-button>
          </div>
        </div>
      }
    </div>
  </div>
}
