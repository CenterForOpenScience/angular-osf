@if (!selectedTemplate) {
  <osf-sub-header [title]="'project.metadata.addMetadata.addCommunityRecord' | translate" />

  <section class="flex flex-column bg-white flex-1 h-full p-3 gap-4 sm:p-5">
    <section class="flex flex-column gap-2">
      <section class="flex flex-column gap-2">
        <h2>{{ 'project.metadata.addMetadata.selectTemplate' | translate }}</h2>
        <div [innerHTML]="'project.metadata.addMetadata.cedarInfo' | translate"></div>
      </section>

      <div class="flex gap-2 flex-wrap sm:gap-4">
        @for (meta of cedarTemplates()?.data; track meta.id) {
          <div
            class="flex flex-column gap-4 metadata p-4 align-items-center cursor-pointer"
            (click)="onSelect(meta)"
            (keydown.enter)="onSelect(meta)"
            tabindex="0"
            role="button"
          >
            <div class="flex flex-row gap-4">
              <h2>{{ meta.attributes.template.title }}</h2>
            </div>

            <div class="flex flex-column">
              <p>{{ meta.attributes.template.description }}</p>
            </div>

            <p-button severity="secondary" [label]="'Select'" (click)="onSelect(meta)"></p-button>
          </div>
        }
      </div>

      <div class="flex justify-content-end flex-0 mt-auto gap-2">
        <p-button
          [label]="'project.metadata.addMetadata.cancel' | translate"
          [link]="true"
          severity="info"
          class="w-10rem"
          (click)="onCancel()"
          type="button"
        ></p-button>
        @if (hasMultiplePages()) {
          <p-button
            [label]="'project.metadata.addMetadata.next' | translate"
            class="w-10rem"
            [disabled]="!hasNextPage()"
            (click)="onNext()"
            type="button"
          ></p-button>
        }
      </div>
    </section>
  </section>
} @else {
  <osf-cedar-template-form [template]="selectedTemplate"></osf-cedar-template-form>
}
