<div class="flex flex-column gap-3">
  <div
    class="citation-item flex justify-content-between gap-3 pb-2 align-items-center"
    [style.padding-left.rem]="level() * 2"
  >
    <div class="citation-content flex align-items-center gap-2 ml-1">
      @if (isLoading()) {
        <osf-icon iconClass="fa fa-spinner fa-spin" />
      } @else {
        <osf-icon
          [iconClass]="isExpanded() ? 'fa fa-minus' : 'fa fa-plus'"
          class="cursor-pointer"
          (click)="toggleExpand()"
        />
      }
      <osf-icon iconClass="fa fa-folder" />
      <span class="citation-text text-sm">
        {{ collection().itemName }}
      </span>
    </div>
  </div>

  @if (isExpanded()) {
    @for (child of children(); track child.item.itemId) {
      @if (isCollection(child.item)) {
        <osf-citation-collection-item
          [addon]="addon()"
          [collection]="child.item"
          [level]="level() + 1"
          [selectedCitationStyle]="selectedCitationStyle()"
        />
      } @else if (isDocument(child.item)) {
        <osf-citation-item
          [citation]="formatCitation(child.item, selectedCitationStyle())"
          [itemUrl]="getItemUrl(child.item)"
          [level]="level() + 1"
        />
      }
    }
  }
</div>
