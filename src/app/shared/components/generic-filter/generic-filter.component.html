<div class="content-body filter dropdown-filter pb-4 z-5">
  @if (isLoading()) {
    <div class="flex justify-content-center align-items-center p-4">
      <osf-loading-spinner />
    </div>
  } @else {
    <div class="relative">
      <p-select
        [id]="filterType()"
        [options]="filterOptions()"
        optionLabel="label"
        optionValue="value"
        [ngModel]="selectedValue()"
        [placeholder]="currentSelectedOption() ? currentSelectedOption()?.label : placeholder()"
        styleClass="w-full"
        panelStyleClass="max-w-30rem scrollable-panel"
        appendTo="body"
        filter
        resetFilterOnHide="false"
        [virtualScroll]="true"
        [virtualScrollItemSize]="25"
        [lazy]="true"
        scrollHeight="200px"
        [autoOptionFocus]="false"
        [loading]="isPaginationLoading() || isSearchLoading()"
        (onLazyLoad)="loadMoreItems($event)"
        (onChange)="onOptionChange($event)"
        (onFilter)="onFilterChange($event)"
        [showClear]="!!selectedValue()"
      >
        <ng-template #item let-item>
          <p class="text-base">{{ item.label }} ({{ item.cardSearchResultCount }})</p>
        </ng-template>
      </p-select>
    </div>
  }
</div>
